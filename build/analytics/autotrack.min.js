'use strict';var _extends=Object.assign||function(c){for(var f,d=1;d<arguments.length;d++)for(var g in f=arguments[d],f)Object.prototype.hasOwnProperty.call(f,g)&&(c[g]=f[g]);return c},_typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&'function'==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?'symbol':typeof c},TRACKING_ID_FBQ=void 0,TRACKING_ID_GA=void 0,TRACKING_VERSION='1',TRACKING_TIME_ZONE='America/Los_Angeles',NULL_VALUE='(not set)',hasWindow=function(){return'object'===('undefined'==typeof window?'undefined':_typeof(window))&&window},hasFbq=function(){return'function'==typeof window.fbq&&window.fbq},hasGa=function(){return'function'==typeof window.ga&&window.ga},hasBoth=function(){return hasFbq()&&hasGa()},dimensions={TRACKING_VERSION:'dimension1',CLIENT_ID:'dimension2',WINDOW_ID:'dimension3',HIT_ID:'dimension4',HIT_TIME:'dimension5',HIT_TYPE:'dimension6',HIT_SOURCE:'dimension7',VISIBILITY_STATE:'dimension8',URL_QUERY_PARAMS:'dimension9'},metrics={RESPONSE_END_TIME:'metric1',DOM_LOAD_TIME:'metric2',WINDOW_LOAD_TIME:'metric3',PAGE_VISIBLE:'metric4',MAX_SCROLL_PERCENTAGE:'metric5',PAGE_LOADS:'metric6'},init=function(_ref){var _ref$FBQ=_ref.FBQ,c=_ref$FBQ===void 0?TRACKING_ID_FBQ:_ref$FBQ,_ref$GA=_ref.GA,d=_ref$GA===void 0?TRACKING_ID_GA:_ref$GA,_ref$TV=_ref.TV,f=_ref$TV===void 0?TRACKING_VERSION:_ref$TV,_ref$TZ=_ref.TZ,g=_ref$TZ===void 0?TRACKING_TIME_ZONE:_ref$TZ;TRACKING_ID_FBQ=c,TRACKING_ID_GA=d,TRACKING_VERSION=f,TRACKING_TIME_ZONE=g,hasBoth()&&function(){window.ga=window.ga||function(){for(var j=arguments.length,h=Array(j),k=0;k<j;k++)h[k]=arguments[k];return(ga.q=ga.q||[]).push(h)},createTracker(),trackErrors(),trackCustomDimensions(),requireAutotrackPlugins(),sendInitialPageview(),sendNavigationTimingMetrics()}()},trackError=function(){var c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};hasGa()&&ga('send','event',Object.assign({eventCategory:'Error',eventAction:c.name||'(no error name)',eventLabel:c.message+'\n'+(c.stack||'(no stack trace)'),nonInteraction:!0},d))},createTracker=function(){ga('create',TRACKING_ID_GA,'auto'),ga('set','transport','beacon'),fbq('init',TRACKING_ID_FBQ)},trackErrors=function(){for(var c=window.__e&&window.__e.q||[],d=function(l){var n=l.error||{message:l.message+' ('+l.lineno+':'+l.colno+')'};trackError(n,{eventCategory:'Uncaught Error'})},f=c,g=Array.isArray(f),h=0,f=g?f:f[Symbol.iterator]();;){var j;if(g){if(h>=f.length)break;j=f[h++]}else{if(h=f.next(),h.done)break;j=h.value}var k=j;d(k)}window.addEventListener('error',d)},trackCustomDimensions=function(){Object.keys(dimensions).forEach(function(c){ga('set',dimensions[c],NULL_VALUE)}),ga(function(c){var d;c.set((d={},d[dimensions.TRACKING_VERSION]=TRACKING_VERSION,d[dimensions.CLIENT_ID]=c.get('clientId'),d[dimensions.WINDOW_ID]=uuid(),d))}),ga(function(c){var d=c.get('buildHitTask');c.set('buildHitTask',function(f){var g=f.get('queueTime')||0;f.set(dimensions.HIT_TIME,new Date-g+'',!0),f.set(dimensions.HIT_ID,uuid(),!0),f.set(dimensions.HIT_TYPE,f.get('hitType'),!0),f.set(dimensions.VISIBILITY_STATE,document.visibilityState,!0),d(f)})})},requireAutotrackPlugins=function(){var c,d;ga('require','cleanUrlTracker',{stripQuery:!0,queryDimensionIndex:getDefinitionIndex(dimensions.URL_QUERY_PARAMS),trailingSlash:'remove'}),ga('require','maxScrollTracker',{sessionTimeout:30,timeZone:TRACKING_TIME_ZONE,maxScrollMetricIndex:getDefinitionIndex(metrics.MAX_SCROLL_PERCENTAGE)}),ga('require','outboundLinkTracker',{events:['click','contextmenu']}),ga('require','pageVisibilityTracker',{sendInitialPageview:!0,pageLoadsMetricIndex:getDefinitionIndex(metrics.PAGE_LOADS),visibleMetricIndex:getDefinitionIndex(metrics.PAGE_VISIBLE),timeZone:TRACKING_TIME_ZONE,fieldsObj:(c={},c[dimensions.HIT_SOURCE]='pageVisibilityTracker',c)}),ga('require','urlChangeTracker',{fieldsObj:(d={},d[dimensions.HIT_SOURCE]='urlChangeTracker',d)})},sendInitialPageview=function(){fbq('track','PageView')},sendNavigationTimingMetrics=function(){if(window.performance&&window.performance.timing){if('complete'!=document.readyState)return void window.addEventListener('load',sendNavigationTimingMetrics);var c=performance.timing,d=c.navigationStart,f=Math.round(c.responseEnd-d),g=Math.round(c.domContentLoadedEventStart-d),h=Math.round(c.loadEventStart-d);if(function j(){for(var l=arguments.length,k=Array(l),m=0;m<l;m++)k[m]=arguments[m];return k.every(function(n){return 0<n&&6e6>n})}(f,g,h)){var k;ga('send','event',(k={eventCategory:'Navigation Timing',eventAction:'track',eventLabel:NULL_VALUE,nonInteraction:!0},k[metrics.RESPONSE_END_TIME]=f,k[metrics.DOM_LOAD_TIME]=g,k[metrics.WINDOW_LOAD_TIME]=h,k))}}},getDefinitionIndex=function(c){return+/\d+$/.exec(c)[0]},uuid=function c(d){return d?(d^16*Math.random()>>d/4).toString(16):'10000000-1000-4000-8000-100000000000'.replace(/[018]/g,c)},trackEvent=function(_ref3,g){var c=_ref3.eventCategory,d=_ref3.eventAction,_ref3$eventLabel=_ref3.eventLabel,f=_ref3$eventLabel===void 0?NULL_VALUE:_ref3$eventLabel;hasGa()&&ga('send','event',{eventCategory:c,eventAction:d,eventLabel:f}),hasFbq()&&g&&fbq('trackCustom',c,{eventAction:d,eventLabel:f})},trackPageview=function(c){hasGa()&&ga('send','pageview',c),hasFbq()&&fbq('track','PageView')},func={init:init,trackError:trackError,trackEvent:trackEvent,trackPageview:trackPageview};(function(c,d,f){'object'===('undefined'==typeof exports?'undefined':_typeof(exports))&&exports&&'string'!=typeof exports.nodeName?Object.assign(exports,f(!0)):'function'==typeof define&&define.amd?define('analytics',function(){return f(!0)}):d[c]=f(!1)})('analytics',this,function(c){var d=Object.assign.apply(Object,Object.keys(func).map(function(f){var g;return g={},g[f]=hasWindow()?func[f]:function(){},g}));return c?_extends({},d,{default:d}):d});